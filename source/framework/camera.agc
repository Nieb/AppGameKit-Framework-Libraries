///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
TYPE CameraType
    Pos AS Vec3
    Rot AS Vec3

    Pch AS FLOAT
    Yaw AS FLOAT
    Look AS Vec3 // Axis -Z     Z is inverted.


    PlaneNearPos AS Vec3
    PlaneFarPos  AS Vec3


    NearDepth AS FLOAT
    FarDepth  AS FLOAT


    Fov        AS FLOAT
    OrthoWidth AS FLOAT

ENDTYPE
GLOBAL Camera AS CameraType


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
FUNCTION UpdateCamera()
    SetCameraPosition(1, Camera.Pos.x, Camera.Pos.y, -Camera.Pos.z) // Z is inverted.
    SetCameraRotation(1, Camera.Rot.x, Camera.Rot.y, -Camera.Rot.z) // Z is inverted.

    Camera.Look = PitchYawToVec3(Camera.Pch, Camera.Yaw)

    Camera.NearDepth =    0.0625
    Camera.FarDepth  = 1024.0
    Camera.PlaneNearPos = add3(Camera.Pos, mul3f(CamLook, Camera.NearDepth + 0.001))
    Camera.PlaneFarPos  = add3(Camera.Pos, mul3f(CamLook, Camera.FarDepth  - 0.001))


ENDFUNCTION

